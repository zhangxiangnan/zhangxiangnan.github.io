<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="一块学习">
    <meta name="keyword" content="undefined">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        反转单链表 - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> progress everyday </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/img/avatar.png">
        </div>
        <div class="name">
            <i>zhangxiangnan</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li>
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li>
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li>
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li>
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#反转单链表"><span class="toc-text">反转单链表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#迭代方式思路"><span class="toc-text">迭代方式思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#迭代（循环）实现"><span class="toc-text">迭代（循环）实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#递归方式思路"><span class="toc-text">递归方式思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#递归方式实现"><span class="toc-text">递归方式实现</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input">
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i> progress everyday </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        反转单链表
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2017-01-12 17:22:08</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#leetcode" title="leetcode">leetcode</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>

    </div>
    <div class="post-content ">
        <p>反转单链表（思考过程及java源码）<br><a id="more"></a></p>
<h3 id="反转单链表"><a href="#反转单链表" class="headerlink" title="反转单链表"></a>反转单链表</h3><p>Reverse a singly linked list.<br><a href="https://leetcode.com/problems/reverse-linked-list/" target="_blank" rel="noopener">https://leetcode.com/problems/reverse-linked-list/</a></p>
<h4 id="迭代方式思路"><a href="#迭代方式思路" class="headerlink" title="迭代方式思路"></a>迭代方式思路</h4><p>  已知条件：假定给定一个正常单链表a-&gt;b-&gt;c-&gt;d，ListNode l1 = a;<br>  推导：反转无非是把已知的链表转化为d-&gt;c-&gt;b-&gt;a，即将原链表的结点指向全部反向。那么，开始思考：   </p>
<p>  1、首先我定义一个变量指向a，表示待反转链表的头结点ListNode oldHead=a，接着第一步很自然想到把a的next指向null，但是一旦我这么改的话，我就没法得到b结点，进而没法修改b的next指向。故我需要在修改a的指向前，提前定义一个额外的变量来临时保存a的next指向，那么我定义ListNode nextNode = oldHead.next，此时nextNode指向b结点，链表还未做任何改动，即a(oldHead)-&gt;b(nextNode)-&gt;c-&gt;d;  </p>
<p>  2、定义了nextNode变量，那么我修改a的指向便无后顾之忧，所以我执行oldHead.next = null,即使a的next指向null，此时原链表变为了2段，一段是a(oldHead)-&gt;null（称作已反转链表部分），另一段是b(nextNode)-&gt;c-&gt;d（称作未反转链表部分），因为oldHead的含义理解为当前需要反转的结点，因为需要将oldHead指向nextNode(b)，并将nextNode指向nextNode.next(c)，修改oldHead指向的话，需要记住已分割部分的头结点，只能再定义个结点newHead=oldHead，执行顺序为newHead=oldHead，oldHead=nextNode，nextNode=nextNode.next，此时链表的2段为a(newHead)-&gt;null, b(oldHead)-&gt;c(nextNode)-&gt;d-&gt;null。</p>
<p>  3、此时我接着要把未反转链表部分接着反转，把头结点b的next指向a（即把未反转链表的头结点指向已反转链表的头结点），此时链表分两段为b（oldHead）-&gt;a（newHead）-&gt;null，c(nextNode)-&gt;d，接着我需要更新几个变量的指向（使其oldHead指向c，newHead就需要指向b，nextNode指向d，2段链表分别为b(newHead)-&gt;a-&gt;null,c(oldHead)-&gt;d(nextNode)-&gt;null。</p>
<p>  4、继续重复过程3，修改c的next使其指向b，那么我得到c（oldHead）—&gt;b（newHead）-&gt;a-&gt;null，d（nextNode）-&gt;null，更新几个变量指向后，2段链表为c(newHead)-&gt;b-&gt;a-&gt;null，d(oldHead)-null(nextNode)</p>
<p>  5、再重复过程3，修改d的next=newHead,2段链表分别为d(oldHead)-&gt;c(newHead)-&gt;b-&gt;a-null，null(nextNode)，此时已经反转完成，然后迭代结束条件就是nextNode==null</p>
<p>  6、总的来说，需要newHead、oldHead、nextNode3个变量，在原链表还是一段的时候，我们的oldHead指向a，nextNode=a.next，newHead则等于null,三个变量的表示意思为：oldHead表示待反转链表的头结点，newHead表示已反转链表的头结点（所以一开始初始值为null），nextNode表示带反转链表的头结点的下一个结点（所以初始值为oldHead.next)。</p>
<h4 id="迭代（循环）实现"><a href="#迭代（循环）实现" class="headerlink" title="迭代（循环）实现"></a>迭代（循环）实现</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">`/**</span><br><span class="line"> * Definition for singly-linked list.</span><br><span class="line"> * public class ListNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode next;</span><br><span class="line"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */`</span><br><span class="line">public class Solution &#123;</span><br><span class="line">    public ListNode reverseList(ListNode head) &#123;</span><br><span class="line">       if(head == null) return null;</span><br><span class="line">       ListNode newHead = null;</span><br><span class="line">       ListNode oldHead = head;</span><br><span class="line">       ListNode nextNode = head.next;// nextNode定义为待反转链表头结点的next结点，初始化为head的next结点</span><br><span class="line">       while(nextNode != null)&#123;//  待反转链表头结点的next结点不为null作为条件</span><br><span class="line">          oldHead.next = newHead;</span><br><span class="line">          newHead =oldHead;</span><br><span class="line">          oldHead = nextNode;</span><br><span class="line">          nextNode = nextNode.next;</span><br><span class="line">       &#125;</span><br><span class="line">       oldHead.next = newHead;// 需要手动更改待反转链表的最后一个头结点的指向</span><br><span class="line">       newHead = oldHead;// 该步可以省略，直接返回oldHead，为了更清晰。</span><br><span class="line">       return newHeadNode;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>  为什么while循环要以nextNode！= null作为结束条件？考虑以下实现，只是不同的初始化方式：<br>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">`/**</span><br><span class="line"> * Definition for singly-linked list.</span><br><span class="line"> * public class ListNode &#123;</span><br><span class="line"> *     int val;</span><br><span class="line"> *     ListNode next;</span><br><span class="line"> *     ListNode(int x) &#123; val = x; &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> */`</span><br><span class="line">public class Solution &#123;</span><br><span class="line">    public ListNode reverseList(ListNode head) &#123;</span><br><span class="line">        if(head == null) return null;</span><br><span class="line">        ListNode newHead = null;// 定义为已反转链表头结点</span><br><span class="line">        ListNode oldHead = head;// 定义为待反转链表头结点</span><br><span class="line">        ListNode next = null;// 定义为待反转链表的头结点的next结点，初始化为null</span><br><span class="line">        while(oldHead != null)&#123;//迭代结束条件是待反转链表的头结点不为null，为null说明反转结束</span><br><span class="line">            next = oldHead.next;// 保存next指向</span><br><span class="line">            oldHead.next = newHead;</span><br><span class="line">            newHead = oldHead;</span><br><span class="line">            oldHead = next;</span><br><span class="line">        &#125;</span><br><span class="line">        return newHead;// newHead结点即为新链表的头结点</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="递归方式思路"><a href="#递归方式思路" class="headerlink" title="递归方式思路"></a>递归方式思路</h4><p>前面分析的过程可以概括为一个已反转链表（初始为null）部分，一个未反转链表部分（初始为待反转链表），每次都是从待反转链表拿出头结点，作为已反转链表部分的头结点，不断重复这个过程，直到待反转链表部分只剩下null结点。这个过程和递归很类似，递归就是在函数里调用函数本身，重复调用函数本身说明解决的问题结构很类似，刚才的分析过程中一直存在的结构或变量有2个，一个是已反转链表、一个未反转链表，那递归函数是不是可以这么定义？</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">private ListNode reverse(ListNode oldHead, ListNode newHead)</span><br></pre></td></tr></table></figure>
<p>我在这个函数里要调用函数自身进行递归，所以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private ListNode reverse(ListNode oldHead, ListNode newHead)&#123;</span><br><span class="line">  return reverse(oldHead, newHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  貌似需要在递归里做些处理，回想我们在每一次的从待反转链表结点里拿出头结点oldHead（拿出前需要先记住oldHead的next结点，否则修改oldHead的next指向后，便找不到原next结点了），将其next指向已反转链表的头结点，这样未反转链表和已反转链表的头结点都发生了变化，我们需要更新oldHead和newHead的指向。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">private ListNode reverse(ListNode oldHead, ListNode newHead)&#123;</span><br><span class="line">  ListNode next = oldHead.next;// 记住待反转链表头结点的next结点</span><br><span class="line">  oldHead.next = newHead;// 将oldHead结点从待反转链表结点拿出，使其成为已反转链表结点的头结点</span><br><span class="line">  newHead = oldHead;// 更新newHead结点指向</span><br><span class="line">  oldHead = next;// 更新oldHead结点指向，指向此时待反转链表结点的头结点（为先前保存的next指向的结点）</span><br><span class="line">  return reverse(oldHead, newHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>  貌似递归还缺少递归出口，拿什么作为出口？回想刚才分析过程，最终是以待反转链表的头结点未null，结束，此时已反转链表的头结点就是反转后新链表的头结点。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">private ListNode reverse(ListNode oldHead, ListNode newHead)&#123;</span><br><span class="line">  if(oldHead == null) return newHead;</span><br><span class="line">  ListNode next = oldHead.next;// 记住待反转链表头结点的next结点</span><br><span class="line">  oldHead.next = newHead;// 将oldHead结点从待反转链表结点拿出，使其成为已反转链表结点的头结点</span><br><span class="line">  newHead = oldHead;// 更新newHead结点指向</span><br><span class="line">  oldHead = next;// 更新oldHead结点指向，指向此时待反转链表结点的头结点（为先前保存的next指向的结点）</span><br><span class="line">  return reverse(oldHead, newHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="递归方式实现"><a href="#递归方式实现" class="headerlink" title="递归方式实现"></a>递归方式实现</h4>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">  public ListNode reverseList(ListNode head) &#123;</span><br><span class="line">    if(head == null) return null;</span><br><span class="line">    return reverse(head, null);// 一开始已反转链表为null，因此头结点未null</span><br><span class="line">&#125;</span><br><span class="line">private ListNode reverse(ListNode oldHead, ListNode newHead)&#123;</span><br><span class="line">  if(oldHead == null) return newHead;</span><br><span class="line">  ListNode next = oldHead.next;// 记住待反转链表头结点的next结点</span><br><span class="line">  oldHead.next = newHead;// 将oldHead结点从待反转链表结点拿出，使其成为已反转链表结点的头结点</span><br><span class="line"></span><br><span class="line">  // 以下2个更新可以省略，为了清晰</span><br><span class="line">  newHead = oldHead;// 更新newHead结点指向</span><br><span class="line">  oldHead = next;// 更新oldHead结点指向，指向此时待反转链表结点的头结点（为先前保存的next指向的结点）</span><br><span class="line">  return reverse(oldHead, newHead);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
        <br>
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
